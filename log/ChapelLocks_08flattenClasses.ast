AST dump for ChapelLocks after pass flattenClasses.
Module use list: Atomics ChapelBase MemConsistency 

{
  function chpl_LocalSpinlock[187386].lock[187277](arg _mt[187390]:_MT[238], arg this[187388]:chpl_LocalSpinlock[187386]) : _unknown[51] "inline" "method" "primary method" "no return value for void"
  {
    const tmp[187356] "const" "temp"
    (187358 'move' tmp[187356](187354 'deref'(187353 '_wide_get_locale' this[187388])))
    {
      {
        unknown tmp[187302] "temp"
        (187350 'move' tmp[187302](187333 call _cond_test(187335 call ||(187340 call(187337 call .(361792 call . this[187388] c"l") c"read"))(187345 call(187342 call .(361797 call . this[187388] c"l") c"testAndSet") acquire[186962]))))
        WhileDo[187307]
        {
          (187300 call chpl_task_yield)
          label _continueLabel[187305]
          (187328 'move' tmp[187302](187311 call _cond_test(187313 call ||(187318 call(187315 call .(361781 call . this[187388] c"l") c"read"))(187323 call(187320 call .(361786 call . this[187388] c"l") c"testAndSet") acquire[186962]))))
          tmp[187302]
        }
        label _breakLabel[187306]
      }
      (187361 'on block' 0 tmp[187356])
    }
  }
  function chpl_LocalSpinlock[187386].unlock[187369](arg _mt[187394]:_MT[238], arg this[187392]:chpl_LocalSpinlock[187386]) : _unknown[51] "inline" "method" "primary method" "no return value for void"
  {
    (187380 call(187372 call .(361803 call . this[187392] c"l") c"clear") release[186960])
  }
  type chpl_LocalSpinlock[187386] unknown l[187271](187270 call chpl__processorAtomicType bool[10])
  (355134 'used modules list'(187259 'use' Atomics[43961])(187261 'use' ChapelBase[307])(187264 'use' MemConsistency[186602]))
}