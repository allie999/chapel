AST dump for ChapelLocks after pass prune.
Module use list: Atomics ChapelBase MemConsistency 

{
  type _class_localson_fn[2086620] val _runtime_hdr[2086621]:chpl_comm_on_bundle_t[209301] val _0_tmp[2086623]:chpl_localeID_t[209294] ref _1_this[2086625]:chpl_LocalSpinlock[187386]
  function chpl__init_ChapelLocks[416047]() : void[4] "insert line file info" "module init" "resolved"
  {
    (524012 return _void[55])
  }
  function _ref(chpl_LocalSpinlock)[941071].lock[187277](ref arg this[187388]:_ref(chpl_LocalSpinlock)[941071]) : void[4] "inline" "method" "primary method" "resolved" "no return value for void"
  {
    const-val tmp[187356]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
    const-val call_tmp[690481]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
    (690484 'move' call_tmp[690481](187353 '_wide_get_locale' this[187388]))
    (187358 'move' tmp[187356] call_tmp[690481])
    val isdirect[2086604]:bool[10] "temp"
    (2086609 'move' isdirect[2086604](2086606 call chpl_doDirectExecuteOn[187423] tmp[187356]))
    if isdirect[2086604]
    {
      (2086613 call on_fn[935473] this[187388])
    }
    {
      val _args_foron_fn[2086628]:_class_localson_fn[2086620] "temp"
      (2086632 'move' _args_foron_fn[2086628](2086630 'stack allocate class' _class_localson_fn[2086620]))
      (2086634 '.=' _args_foron_fn[2086628] _0_tmp[2086623] tmp[187356])
      ref tmp[2086638]:chpl_LocalSpinlock[187386] "temp"
      (2086642 'move' tmp[2086638](2086640 'set reference' this[187388]))
      (2086644 '.=' _args_foron_fn[2086628] _1_this[2086625] tmp[2086638])
      val _args_vforon_fn[2086648]:c_void_ptr[149] "temp"
      (2086652 'move' _args_vforon_fn[2086648](2086650 'cast_to_void_star' _args_foron_fn[2086628]))
      val _args_sizeon_fn[2086654]:int(64)[13] "temp"
      (2086658 'move' _args_sizeon_fn[2086654](2086656 'sizeof_bundle' _class_localson_fn[2086620]))
      on(2086690 call wrapon_fn[2086660] tmp[187356] _args_vforon_fn[2086648] _args_sizeon_fn[2086654] _args_foron_fn[2086628])
    }
    {
    }
    (524008 return _void[55])
  }
  function _ref(chpl_LocalSpinlock)[941071].unlock[187369](ref arg this[187392]:_ref(chpl_LocalSpinlock)[941071]) : void[4] "inline" "method" "primary method" "resolved" "no return value for void"
  {
    ref call_tmp[690554]:_ref(AtomicBool)[941182] "dead after last mention" "maybe param" "temp"
    (690557 'move' call_tmp[690554](361891 call l[820295] this[187392]))
    (187380 call clear[1232495] call_tmp[690554])
    (524010 return _void[55])
  }
  function _ref(chpl_LocalSpinlock)[941071].l[820295](ref arg this[820299]:_ref(chpl_LocalSpinlock)[941071]) ref : _ref(AtomicBool)[941182] "field accessor" "inline" "method" "primary method" "no implicit copy" "no parens" "reference to const when const this" "resolved" "fn synchronization free"
  {
    ref ret[820309]:_ref(AtomicBool)[941182] "dead after last mention" "RVV" "temp"
    ref call_tmp[820316]:_ref(AtomicBool)[941182] "dead after last mention" "maybe param" "temp"
    (820319 'move' call_tmp[820316](820303 '.' this[820299] l[187271]))
    (820314 'move' ret[820309] call_tmp[820316])
    (820311 return ret[820309])
  }
  function _ref(chpl_LocalSpinlock)[941071].init[820321](ref arg this[820324]:_ref(chpl_LocalSpinlock)[941071], const  ref arg l[820327]:AtomicBool[45874]) : void[4] "compiler generated" "last resort" "method" "primary method" "resolved" "suppress lvalue error"
  {
    val _formal_tmp_l[945155]:AtomicBool[45874] "dead at end of block" "no auto destroy" "no copy" "temp"
    (945158 'move' _formal_tmp_l[945155] l[820327])
    (820343 '.=' this[820324] l[187271] _formal_tmp_l[945155])
    (820347 return _void[55])
  }
  function init_default_l[944828](ref arg _retArg[1831951]:_ref(AtomicBool)[941182]) : void[4] "compiler generated" "default actual function" "fn returns via _retArg" "inline" "invisible fn" "last resort" "lineno ok" "maybe param" "maybe type" "method" "primary method" "resolved" "was compiler generated"
  {
    const-val ret[944830]:AtomicBool[45874] "dead after last mention" "RVV" "maybe param" "temp"
    const-val l[944835]:AtomicBool[45874] "dead after last mention" "expr temp" "maybe param" "suppress lvalue error" "temp" "user variable name"
    val _formal_type[944837]:AtomicBool[45874] "dead after last mention" "temp" "type variable"
    (944852 call init[44785] l[944835])
    (944848 'move' ret[944830] l[944835])
    (1831953 '=' _retArg[1831951] ret[944830])
    (1831955 return _void[55])
  }
  function _ref(chpl_LocalSpinlock)[941071].deinit[820394](const  ref arg this[820398]:_ref(chpl_LocalSpinlock)[941071]) : void[4] "compiler generated" "destructor" "inline" "last resort" "method" "primary method" "resolved"
  {
    label _enddeinit[1814887]
    ref _field_destructor_tmp_[1814885]:_ref(AtomicBool)[941182] "temp"
    (1814892 'move' _field_destructor_tmp_[1814885](1814889 '.' this[820398] l[187271]))
    (1814894 call deinit[44860] _field_destructor_tmp_[1814885])
    (820406 return _void[55])
  }
  type chpl_LocalSpinlock[187386] val l[187271]:AtomicBool[45874]
  function on_fn[935473](ref arg this[1806908]:_ref(chpl_LocalSpinlock)[941071]) : void[4] "on" "resolved"
  {
    {
      val tmp[187302]:bool[10] "dead after last mention" "temp"
      const-val tmp[429525]:bool[10] "dead after last mention" "maybe param" "temp"
      ref call_tmp[690488]:_ref(AtomicBool)[941182] "dead after last mention" "maybe param" "temp"
      (690491 'move' call_tmp[690488](361880 call l[820295] this[1806908]))
      (429536 'move' tmp[429525](187340 call read[1230769] call_tmp[690488]))
      val tmp[572077]:bool[10] "dead after last mention" "expr temp" "if-expr result" "insert auto destroy" "temp"
      const-val tmp[572078]:bool[10] "dead after last mention" "maybe param" "temp"
      const-val call_tmp[690500]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
      (690503 'move' call_tmp[690500] tmp[429525])
      (572083 'move' tmp[572078] call_tmp[690500])
      if tmp[572078]
      {
        (572088 'move' tmp[572077] 1)
      }
      {
        const-val tmp[572090]:bool[10] "dead after last mention" "expr temp" "maybe param" "no auto destroy" "temp"
        ref call_tmp[690507]:_ref(AtomicBool)[941182] "dead after last mention" "maybe param" "temp"
        (690510 'move' call_tmp[690507](361885 call l[820295] this[1806908]))
        const-val call_tmp[690514]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
        (690517 'move' call_tmp[690514](187345 call testAndSet[1231645] call_tmp[690507]))
        (572092 'move' tmp[572090] call_tmp[690514])
        (572097 'move' tmp[572077] tmp[572090])
      }
      (187350 'move' tmp[187302] tmp[572077])
      WhileDo[187307] hazard
      {
        (187300 call chpl_task_yield[209642])
        label _continueLabel[187305]
        const-val tmp[429504]:bool[10] "dead after last mention" "maybe param" "temp"
        ref call_tmp[690521]:_ref(AtomicBool)[941182] "dead after last mention" "maybe param" "temp"
        (690524 'move' call_tmp[690521](361869 call l[820295] this[1806908]))
        (429515 'move' tmp[429504](187318 call read[1230769] call_tmp[690521]))
        val tmp[572104]:bool[10] "dead after last mention" "expr temp" "if-expr result" "insert auto destroy" "temp"
        const-val tmp[572105]:bool[10] "dead after last mention" "maybe param" "temp"
        const-val call_tmp[690533]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
        (690536 'move' call_tmp[690533] tmp[429504])
        (572110 'move' tmp[572105] call_tmp[690533])
        if tmp[572105]
        {
          (572115 'move' tmp[572104] 1)
        }
        {
          const-val tmp[572117]:bool[10] "dead after last mention" "expr temp" "maybe param" "no auto destroy" "temp"
          ref call_tmp[690540]:_ref(AtomicBool)[941182] "dead after last mention" "maybe param" "temp"
          (690543 'move' call_tmp[690540](361874 call l[820295] this[1806908]))
          const-val call_tmp[690547]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
          (690550 'move' call_tmp[690547](187323 call testAndSet[1231645] call_tmp[690540]))
          (572119 'move' tmp[572117] call_tmp[690547])
          (572124 'move' tmp[572104] tmp[572117])
        }
        (187328 'move' tmp[187302] tmp[572104])
        tmp[187302]
      }
      label _breakLabel[187306]
    }
    (935480 return _void[55])
  }
  function wrapon_fn[2086660](const in arg dummy_locale_arg[2086662]:chpl_localeID_t[209294], in arg buf[2086664]:c_void_ptr[149], in arg buf_size[2086666]:int(64)[13], in arg c[2086668]:_class_localson_fn[2086620]) : void[4] "on block"
  {
    val _0_tmp[2086673]:chpl_localeID_t[209294] "temp"
    (2086678 'move' _0_tmp[2086673](2086675 '.v' c[2086668] _0_tmp[2086623]))
    ref _1_this[2086680]:chpl_LocalSpinlock[187386] "temp"
    (2086685 'move' _1_this[2086680](2086682 '.v' c[2086668] _1_this[2086625]))
    (2086671 call on_fn[935473] _1_this[2086680])
    (2086688 return _void[55])
  }
}