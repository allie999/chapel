AST dump for ChapelLocks after pass prune.
Module use list: Atomics ChapelBase MemConsistency 

{
  type _class_localson_fn[2148402] val _runtime_hdr[2148403]:chpl_comm_on_bundle_t[209359] val _0_tmp[2148405]:chpl_localeID_t[209352] ref _1_this[2148407]:chpl_LocalSpinlock[187432]
  function chpl__init_ChapelLocks[416090]() : void[4] "insert line file info" "module init" "resolved"
  {
    (524058 return _void[55])
  }
  function _ref(chpl_LocalSpinlock)[941132].lock[187323](ref arg this[187434]:_ref(chpl_LocalSpinlock)[941132]) : void[4] "inline" "method" "primary method" "resolved" "no return value for void"
  {
    const-val tmp[187402]:chpl_localeID_t[209352] "dead after last mention" "const" "temp"
    const-val call_tmp[690536]:chpl_localeID_t[209352] "dead after last mention" "expr temp" "maybe param" "temp"
    (690539 'move' call_tmp[690536](187399 '_wide_get_locale' this[187434]))
    (187404 'move' tmp[187402] call_tmp[690536])
    val isdirect[2148386]:bool[10] "temp"
    (2148391 'move' isdirect[2148386](2148388 call chpl_doDirectExecuteOn[187469] tmp[187402]))
    if isdirect[2148386]
    {
      (2148395 call on_fn[935534] this[187434])
    }
    {
      val _args_foron_fn[2148410]:_class_localson_fn[2148402] "temp"
      (2148414 'move' _args_foron_fn[2148410](2148412 'stack allocate class' _class_localson_fn[2148402]))
      (2148416 '.=' _args_foron_fn[2148410] _0_tmp[2148405] tmp[187402])
      ref tmp[2148420]:chpl_LocalSpinlock[187432] "temp"
      (2148424 'move' tmp[2148420](2148422 'set reference' this[187434]))
      (2148426 '.=' _args_foron_fn[2148410] _1_this[2148407] tmp[2148420])
      val _args_vforon_fn[2148430]:c_void_ptr[149] "temp"
      (2148434 'move' _args_vforon_fn[2148430](2148432 'cast_to_void_star' _args_foron_fn[2148410]))
      val _args_sizeon_fn[2148436]:int(64)[13] "temp"
      (2148440 'move' _args_sizeon_fn[2148436](2148438 'sizeof_bundle' _class_localson_fn[2148402]))
      on(2148472 call wrapon_fn[2148442] tmp[187402] _args_vforon_fn[2148430] _args_sizeon_fn[2148436] _args_foron_fn[2148410])
    }
    {
    }
    (524054 return _void[55])
  }
  function _ref(chpl_LocalSpinlock)[941132].unlock[187415](ref arg this[187438]:_ref(chpl_LocalSpinlock)[941132]) : void[4] "inline" "method" "primary method" "resolved" "no return value for void"
  {
    ref call_tmp[690609]:_ref(AtomicBool)[941243] "dead after last mention" "maybe param" "temp"
    (690612 'move' call_tmp[690609](361934 call l[820356] this[187438]))
    (187426 call clear[1232556] call_tmp[690609])
    (524056 return _void[55])
  }
  function _ref(chpl_LocalSpinlock)[941132].l[820356](ref arg this[820360]:_ref(chpl_LocalSpinlock)[941132]) ref : _ref(AtomicBool)[941243] "field accessor" "inline" "method" "primary method" "no implicit copy" "no parens" "reference to const when const this" "resolved" "fn synchronization free"
  {
    ref ret[820370]:_ref(AtomicBool)[941243] "dead after last mention" "RVV" "temp"
    ref call_tmp[820377]:_ref(AtomicBool)[941243] "dead after last mention" "maybe param" "temp"
    (820380 'move' call_tmp[820377](820364 '.' this[820360] l[187317]))
    (820375 'move' ret[820370] call_tmp[820377])
    (820372 return ret[820370])
  }
  function _ref(chpl_LocalSpinlock)[941132].init[820382](ref arg this[820385]:_ref(chpl_LocalSpinlock)[941132], const  ref arg l[820388]:AtomicBool[45877]) : void[4] "compiler generated" "last resort" "method" "primary method" "resolved" "suppress lvalue error"
  {
    val _formal_tmp_l[945216]:AtomicBool[45877] "dead at end of block" "no auto destroy" "no copy" "temp"
    (945219 'move' _formal_tmp_l[945216] l[820388])
    (820404 '.=' this[820385] l[187317] _formal_tmp_l[945216])
    (820408 return _void[55])
  }
  function init_default_l[944889](ref arg _retArg[1865568]:_ref(AtomicBool)[941243]) : void[4] "compiler generated" "default actual function" "fn returns via _retArg" "inline" "invisible fn" "last resort" "lineno ok" "maybe param" "maybe type" "method" "primary method" "resolved" "was compiler generated"
  {
    const-val ret[944891]:AtomicBool[45877] "dead after last mention" "RVV" "maybe param" "temp"
    const-val l[944896]:AtomicBool[45877] "dead after last mention" "expr temp" "maybe param" "suppress lvalue error" "temp" "user variable name"
    val _formal_type[944898]:AtomicBool[45877] "dead after last mention" "temp" "type variable"
    (944913 call init[44788] l[944896])
    (944909 'move' ret[944891] l[944896])
    (1865570 '=' _retArg[1865568] ret[944891])
    (1865572 return _void[55])
  }
  function _ref(chpl_LocalSpinlock)[941132].deinit[820455](const  ref arg this[820459]:_ref(chpl_LocalSpinlock)[941132]) : void[4] "compiler generated" "destructor" "inline" "last resort" "method" "primary method" "resolved"
  {
    label _enddeinit[1848358]
    ref _field_destructor_tmp_[1848356]:_ref(AtomicBool)[941243] "temp"
    (1848363 'move' _field_destructor_tmp_[1848356](1848360 '.' this[820459] l[187317]))
    (1848365 call deinit[44863] _field_destructor_tmp_[1848356])
    (820467 return _void[55])
  }
  type chpl_LocalSpinlock[187432] val l[187317]:AtomicBool[45877]
  function on_fn[935534](ref arg this[1841202]:_ref(chpl_LocalSpinlock)[941132]) : void[4] "on" "resolved"
  {
    {
      val tmp[187348]:bool[10] "dead after last mention" "temp"
      const-val tmp[429568]:bool[10] "dead after last mention" "maybe param" "temp"
      ref call_tmp[690543]:_ref(AtomicBool)[941243] "dead after last mention" "maybe param" "temp"
      (690546 'move' call_tmp[690543](361923 call l[820356] this[1841202]))
      (429579 'move' tmp[429568](187386 call read[1230830] call_tmp[690543]))
      val tmp[572132]:bool[10] "dead after last mention" "expr temp" "if-expr result" "insert auto destroy" "temp"
      const-val tmp[572133]:bool[10] "dead after last mention" "maybe param" "temp"
      const-val call_tmp[690555]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
      (690558 'move' call_tmp[690555] tmp[429568])
      (572138 'move' tmp[572133] call_tmp[690555])
      if tmp[572133]
      {
        (572143 'move' tmp[572132] 1)
      }
      {
        const-val tmp[572145]:bool[10] "dead after last mention" "expr temp" "maybe param" "no auto destroy" "temp"
        ref call_tmp[690562]:_ref(AtomicBool)[941243] "dead after last mention" "maybe param" "temp"
        (690565 'move' call_tmp[690562](361928 call l[820356] this[1841202]))
        const-val call_tmp[690569]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
        (690572 'move' call_tmp[690569](187391 call testAndSet[1231706] call_tmp[690562]))
        (572147 'move' tmp[572145] call_tmp[690569])
        (572152 'move' tmp[572132] tmp[572145])
      }
      (187396 'move' tmp[187348] tmp[572132])
      WhileDo[187353] hazard
      {
        (187346 call chpl_task_yield[209700])
        label _continueLabel[187351]
        const-val tmp[429547]:bool[10] "dead after last mention" "maybe param" "temp"
        ref call_tmp[690576]:_ref(AtomicBool)[941243] "dead after last mention" "maybe param" "temp"
        (690579 'move' call_tmp[690576](361912 call l[820356] this[1841202]))
        (429558 'move' tmp[429547](187364 call read[1230830] call_tmp[690576]))
        val tmp[572159]:bool[10] "dead after last mention" "expr temp" "if-expr result" "insert auto destroy" "temp"
        const-val tmp[572160]:bool[10] "dead after last mention" "maybe param" "temp"
        const-val call_tmp[690588]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
        (690591 'move' call_tmp[690588] tmp[429547])
        (572165 'move' tmp[572160] call_tmp[690588])
        if tmp[572160]
        {
          (572170 'move' tmp[572159] 1)
        }
        {
          const-val tmp[572172]:bool[10] "dead after last mention" "expr temp" "maybe param" "no auto destroy" "temp"
          ref call_tmp[690595]:_ref(AtomicBool)[941243] "dead after last mention" "maybe param" "temp"
          (690598 'move' call_tmp[690595](361917 call l[820356] this[1841202]))
          const-val call_tmp[690602]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
          (690605 'move' call_tmp[690602](187369 call testAndSet[1231706] call_tmp[690595]))
          (572174 'move' tmp[572172] call_tmp[690602])
          (572179 'move' tmp[572159] tmp[572172])
        }
        (187374 'move' tmp[187348] tmp[572159])
        tmp[187348]
      }
      label _breakLabel[187352]
    }
    (935541 return _void[55])
  }
  function wrapon_fn[2148442](const in arg dummy_locale_arg[2148444]:chpl_localeID_t[209352], in arg buf[2148446]:c_void_ptr[149], in arg buf_size[2148448]:int(64)[13], in arg c[2148450]:_class_localson_fn[2148402]) : void[4] "on block"
  {
    val _0_tmp[2148455]:chpl_localeID_t[209352] "temp"
    (2148460 'move' _0_tmp[2148455](2148457 '.v' c[2148450] _0_tmp[2148405]))
    ref _1_this[2148462]:chpl_LocalSpinlock[187432] "temp"
    (2148467 'move' _1_this[2148462](2148464 '.v' c[2148450] _1_this[2148407]))
    (2148453 call on_fn[935534] _1_this[2148462])
    (2148470 return _void[55])
  }
}