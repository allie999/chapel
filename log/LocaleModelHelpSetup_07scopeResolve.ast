AST dump for LocaleModelHelpSetup after pass scopeResolve.
Module use list: ChapelLocale DefaultRectangular ChapelNumLocales ChapelEnv Sys SysCTypes 

{
  unknown debugLocaleModel[208202] "config" "param" 0
  (208205 'end of statement')
  unknown chpl_nodeID[208207] "extern" chpl_nodeID_t[89862]
  (208210 'end of statement')
  function chpl_root_locale_accum[208399].accum[208253](arg _mt[208403]:_MT[238], arg this[208401]:chpl_root_locale_accum[208399], arg loc[208250] :
  locale[28]) : _unknown[51] "method" "primary method" "no return value for void"
  {
    (208266 call(208256 call .(362995 call . this[208401] c"nPUsPhysAcc") c"add")(208262 call . loc[208250] c"nPUsPhysAcc"))
    (208280 call(208270 call .(363001 call . this[208401] c"nPUsPhysAll") c"add")(208276 call . loc[208250] c"nPUsPhysAll"))
    (208293 call(208283 call .(363007 call . this[208401] c"nPUsLogAcc") c"add")(208289 call . loc[208250] c"nPUsLogAcc"))
    (208306 call(208296 call .(363013 call . this[208401] c"nPUsLogAll") c"add")(208302 call . loc[208250] c"nPUsLogAll"))
    (208317 call(208309 call .(363019 call . this[208401] c"maxTaskPar") c"add")(208313 call . loc[208250] c"maxTaskPar"))
  }
  function chpl_root_locale_accum[208399].setRootLocaleValues[208328](arg _mt[208407]:_MT[238], arg this[208405]:chpl_root_locale_accum[208399], arg dst[208325] :
  RootLocale[89694]) : _unknown[51] "method" "primary method" "no return value for void"
  {
    (208340 call =(208331 call . dst[208325] c"nPUsPhysAcc")(208339 call(208335 call .(363026 call . this[208405] c"nPUsPhysAcc") c"read")))
    (208354 call =(208345 call . dst[208325] c"nPUsPhysAll")(208353 call(208349 call .(363032 call . this[208405] c"nPUsPhysAll") c"read")))
    (208367 call =(208358 call . dst[208325] c"nPUsLogAcc")(208366 call(208362 call .(363038 call . this[208405] c"nPUsLogAcc") c"read")))
    (208380 call =(208371 call . dst[208325] c"nPUsLogAll")(208379 call(208375 call .(363044 call . this[208405] c"nPUsLogAll") c"read")))
    (208393 call =(208384 call . dst[208325] c"maxTaskPar")(208392 call(208388 call .(363050 call . this[208405] c"maxTaskPar") c"read")))
  }
  type chpl_root_locale_accum[208399] unknown nPUsPhysAcc[208215](208213 call chpl__atomicType int(64)[13]) unknown nPUsPhysAll[208222](208220 call chpl__atomicType int(64)[13]) unknown nPUsLogAcc[208229](208227 call chpl__atomicType int(64)[13]) unknown nPUsLogAll[208236](208234 call chpl__atomicType int(64)[13]) unknown maxTaskPar[208243](208241 call chpl__atomicType int(64)[13])
  function helpSetupRootLocaleFlat[208417](arg dst[208414] :
  RootLocale[89694]) : _unknown[51] "no return value for void"
  {
    unknown root_accum[208420] chpl_root_locale_accum[208399]
    (208423 'end of statement')
    Forall {
      induction variables:
        
        unknown locIdx[208482] "index var" "insert auto destroy"
      iterated expressions:
        (208433 call(208429 call . dst[208414] c"chpl_initOnLocales"))
      shadow variables:
        root_accum[208435] 'ref' intent outer var root_accum[208420]
          init block
          {
          }
          deinit block
          {
          }
      other variables
        forall body
      {
        const node[208455] "const"(208440 'new'(208454 call locale[28](208444 'new'(_chpl_manager = unmanaged[220](?))(208452 call LocaleModel[394063](?)(208446 'new'(208450 call locale[28] dst[208414]))))))
        (208458 'end of statement')
        (208468 call =(208466 call(208461 call . dst[208414] c"myLocales") locIdx[208482]) node[208455])
        (208479 call(208474 call . root_accum[208435] c"accum") node[208455])
      }
    }
    (208494 call(208489 call . root_accum[208420] c"setRootLocaleValues") dst[208414])
  }
  function helpSetupRootLocaleNUMA[208505](arg dst[208502] :
  RootLocale[89694]) : _unknown[51] "no return value for void"
  {
    unknown root_accum[208508] chpl_root_locale_accum[208399]
    (208511 'end of statement')
    Forall {
      induction variables:
        
        unknown locIdx[208571] "index var" "insert auto destroy"
      iterated expressions:
        (208519 call(208515 call . dst[208502] c"chpl_initOnLocales"))
      shadow variables:
        root_accum[208521] 'ref' intent outer var root_accum[208508]
          init block
          {
          }
          deinit block
          {
          }
      other variables
        forall body
      {
        (208529 call chpl_task_setSubloc c_sublocid_any[89878])
        const node[208547] "const"(208532 'new'(208546 call locale[28](208536 'new'(_chpl_manager = unmanaged[220](?))(208544 call LocaleModel[394063](?)(208538 'new'(208542 call locale[28] dst[208502]))))))
        (208550 'end of statement')
        (208559 call =(208557 call(208552 call . dst[208502] c"myLocales") locIdx[208571]) node[208547])
        (208568 call(208563 call . root_accum[208521] c"accum") node[208547])
      }
    }
    (208581 call(208576 call . root_accum[208508] c"setRootLocaleValues") dst[208502])
  }
  function helpSetupRootLocaleAPU[208592](arg dst[208589] :
  RootLocale[89694]) : _unknown[51] "no return value for void"
  {
    unknown root_accum[208595] chpl_root_locale_accum[208399]
    (208598 'end of statement')
    Forall {
      induction variables:
        
        unknown locIdx[208658] "index var" "insert auto destroy"
      iterated expressions:
        (208606 call(208602 call . dst[208589] c"chpl_initOnLocales"))
      shadow variables:
        root_accum[208608] 'ref' intent outer var root_accum[208595]
          init block
          {
          }
          deinit block
          {
          }
      other variables
        forall body
      {
        (208616 call chpl_task_setSubloc c_sublocid_any[89878])
        const node[208634] "const"(208619 'new'(208633 call locale[28](208623 'new'(_chpl_manager = unmanaged[220](?))(208631 call LocaleModel[394063](?)(208625 'new'(208629 call locale[28] dst[208589]))))))
        (208637 'end of statement')
        (208646 call =(208644 call(208639 call . dst[208589] c"myLocales") locIdx[208658]) node[208634])
        (208655 call(208650 call . root_accum[208608] c"accum") node[208634])
      }
    }
    (208668 call(208663 call . root_accum[208595] c"setRootLocaleValues") dst[208589])
    (208676 call(208671 call .(363065 call here[90438]) c"runningTaskCntSet") 0)
  }
  function localSpawn[208682]() : _unknown[51] "inline" "private"
  {
    if(208787 call _cond_test(208702 call == CHPL_COMM[21241] "gasnet"))
    {
      unknown spawnfn[208705] c_string[19]
      (208708 'end of statement')
      if(208782 call _cond_test(208748 call &&(208740 call &&(208728 call == CHPL_COMM_SUBSTRATE[21266] "udp")(208738 call ==(208736 call sys_getenv c"GASNET_SPAWNFN" spawnfn[208705]) 1))(208746 call == spawnfn[208705] c"L")))
      {
        (208751 return 1)
      }
      {
        if(208778 call _cond_test(208772 call == CHPL_COMM_SUBSTRATE[21266] "smp"))
        {
          (208775 return 1)
        }
      }
    }
    (208793 return 0)
  }
  function getNodeName[208799]() : _unknown[51] "inline" "private"
  {
    function chpl_nodeName[208803]() : _unknown[51] "extern" "local args" "no fn body" "no return value for void"
    {
    }
    { scopeless type
      c_string[19]
    }
    unknown _node_name[208811] string[26]
    (208814 'end of statement')
    Try!
    {
      {
        (208822 call = _node_name[208811](208821 call createStringWithNewBuffer(208819 call chpl_nodeName)))
      }
    }
    const _node_id[208836] "const"(208834 call _cast string[26](208831 call _cast int(64)[13] chpl_nodeID[208207]))
    (208839 'end of statement')
    (208854 return(208851 IfExpr (208842 call localSpawn) then
    { scopeless
      (208848 call +(208845 call + _node_name[208811] "-") _node_id[208836])
    } else
    { scopeless
      _node_name[208811]
    } ))
  }
  function helpSetupLocaleFlat[208865](arg dst[208862] :
  LocaleModel[89195], out arg local_name[208868] :
  string[26]) : _unknown[51] "no return value for void"
  {
    (208875 call = local_name[208868](208874 call getNodeName))
    function chpl_task_getCallStackSize[208881]() : _unknown[51] "extern" "local args" "no fn body" "no return value for void"
    {
    }
    { scopeless type
      size_t[20657]
    }
    (208894 call =(208888 call . dst[208862] c"callStackSize")(208893 call chpl_task_getCallStackSize))
    function chpl_topo_getNumCPUsPhysical[208903](arg accessible_only[208900] :
    bool[10]) : _unknown[51] "extern" "local args" "no fn body" "no return value for void"
    {
    }
    { scopeless type
      c_int[20552]
    }
    (208917 call =(208910 call . dst[208862] c"nPUsPhysAcc")(208916 call chpl_topo_getNumCPUsPhysical 1))
    (208928 call =(208921 call . dst[208862] c"nPUsPhysAll")(208927 call chpl_topo_getNumCPUsPhysical 0))
    function chpl_topo_getNumCPUsLogical[208937](arg accessible_only[208934] :
    bool[10]) : _unknown[51] "extern" "local args" "no fn body" "no return value for void"
    {
    }
    { scopeless type
      c_int[20552]
    }
    (208951 call =(208944 call . dst[208862] c"nPUsLogAcc")(208950 call chpl_topo_getNumCPUsLogical 1))
    (208962 call =(208955 call . dst[208862] c"nPUsLogAll")(208961 call chpl_topo_getNumCPUsLogical 0))
    function chpl_task_getMaxPar[208967]() : _unknown[51] "extern" "local args" "no fn body" "no return value for void"
    {
    }
    { scopeless type
      (208972 call uint(64)[115] 32)
    }
    (208983 call =(208977 call . dst[208862] c"maxTaskPar")(208982 call chpl_task_getMaxPar))
  }
  function helpSetupLocaleNUMA[208995](arg dst[208992] :
  LocaleModel[89195], out arg local_name[208998] :
  string[26], arg numSublocales[209001]:_any[178](?), arg NumaDomain[209003]:_any[178](?)) : _unknown[51] "no return value for void"
  {
    (209009 call helpSetupLocaleFlat dst[208992] local_name[208998])
    function chpl_task_getMaxPar[209014]() : _unknown[51] "extern" "local args" "no fn body" "no return value for void"
    {
    }
    { scopeless type
      (209019 call uint(64)[115] 32)
    }
    if(209241 call _cond_test(209025 call >= numSublocales[209001] 1))
    {
      const nPUsPhysAccPerSubloc[209034] "const"(209032 call /(209028 call . dst[208992] c"nPUsPhysAcc") numSublocales[209001])
      (209037 'end of statement')
      const nPUsPhysAllPerSubloc[209046] "const"(209044 call /(209040 call . dst[208992] c"nPUsPhysAll") numSublocales[209001])
      (209049 'end of statement')
      const nPUsLogAccPerSubloc[209057] "const"(209055 call /(209051 call . dst[208992] c"nPUsLogAcc") numSublocales[209001])
      (209060 'end of statement')
      const nPUsLogAllPerSubloc[209068] "const"(209066 call /(209062 call . dst[208992] c"nPUsLogAll") numSublocales[209001])
      (209071 'end of statement')
      const maxTaskParPerSubloc[209078] "const"(209076 call /(209074 call chpl_task_getMaxPar) numSublocales[209001])
      (209081 'end of statement')
      const origSubloc[209085] "const"(209084 call chpl_task_getRequestedSubloc)
      (209088 'end of statement')
      {
        unknown _indexOfInterest[209202] "an _indexOfInterest or chpl__followIdx variable" "temp"
        unknown _iterator[209203] "expr temp" "temp"
        (209212 'move' _iterator[209203](209210 call _getIterator(209093 call . dst[208992] c"childSpace")))
        Defer
        {
          {
            (209229 call _freeIterator _iterator[209203])
          }
        }
        { scopeless type
          (209218 'move' _indexOfInterest[209202](209215 call iteratorIndex _iterator[209203]))
        }
        ForLoop[209204]
        {
          unknown i[209222] "index var" "insert auto destroy"
          (209224 'move' i[209222] _indexOfInterest[209202])
          {
            (209102 call chpl_task_setSubloc(209099 call _cast chpl_sublocID_t[89869] i[209222]))
            (209129 call =(209113 call(209108 call . dst[208992] c"childLocales") i[209222])(209116 'new'(_chpl_manager = unmanaged[220](?))(209128 call NumaDomain[209003](209120 call _cast chpl_sublocID_t[89869] i[209222])(209123 'new'(209127 call locale[28] dst[208992])))))
            (209143 call =(209139 call .(209138 call(209133 call . dst[208992] c"childLocales") i[209222]) c"nPUsPhysAcc") nPUsPhysAccPerSubloc[209034])
            (209157 call =(209153 call .(209152 call(209147 call . dst[208992] c"childLocales") i[209222]) c"nPUsPhysAll") nPUsPhysAllPerSubloc[209046])
            (209171 call =(209167 call .(209166 call(209161 call . dst[208992] c"childLocales") i[209222]) c"nPUsLogAcc") nPUsLogAccPerSubloc[209057])
            (209185 call =(209181 call .(209180 call(209175 call . dst[208992] c"childLocales") i[209222]) c"nPUsLogAll") nPUsLogAllPerSubloc[209068])
            (209199 call =(209195 call .(209194 call(209189 call . dst[208992] c"childLocales") i[209222]) c"maxTaskPar") maxTaskParPerSubloc[209078])
          }
          label _continueLabel[209207]
          _indexOfInterest[209202]
          _iterator[209203]
        }
        label _breakLabel[209208]
      }
      (209239 call chpl_task_setSubloc origSubloc[209085])
    }
  }
  function helpSetupLocaleAPU[209254](arg dst[209251] :
  LocaleModel[89195], out arg local_name[209257] :
  string[26], out arg numSublocales[209260]:_any[178](?), arg CPULocale[209262]:_any[178](?), arg GPULocale[209264]:_any[178](?)) : _unknown[51] "no return value for void"
  {
    (209270 call helpSetupLocaleFlat dst[209251] local_name[209257])
    function chpl_task_getMaxPar[209275]() : _unknown[51] "extern" "local args" "no fn body" "no return value for void"
    {
    }
    { scopeless type
      (209280 call uint(64)[115] 32)
    }
    (209286 call = numSublocales[209260] 2)
    const origSubloc[209292] "const"(209291 call chpl_task_getRequestedSubloc)
    (209295 'end of statement')
    (209302 call chpl_task_setSubloc(209299 call _cast chpl_sublocID_t[89869] 0))
    (209321 call =(209307 call . dst[209251] c"CPU")(209312 'new'(_chpl_manager = unmanaged[220](?))(209320 call CPULocale[209262](209316 call _cast chpl_sublocID_t[89869] 0) dst[209251])))
    (209330 call chpl_task_setSubloc(209327 call _cast chpl_sublocID_t[89869] 1))
    (209335 call chpl_task_setSubloc origSubloc[209292])
  }
  (355306 'used modules list'(208183 'use' ChapelLocale[89847])(208187 'use' DefaultRectangular[93282])(208190 'use' ChapelNumLocales[209876])(208193 'use' ChapelEnv[20946])(208196 'use' Sys[292172])(208199 'use' SysCTypes[20943]))
}