AST dump for ByteBufferHelpers after pass expandExternArrayCalls.
Module use list: 

{
  (172507 'use' ChapelStandard)
  (172511 'use' SysCTypes)
  unknown byteType[172517] "no doc" "type variable"(172516 call uint[115] 8)
  unknown bufferType[172527] "no doc" "type variable"(172526 call c_ptr(172524 call uint[115] 8))
  unknown locIdType[172532] "no doc" "type variable"(172531 'typeof' chpl_nodeID)
  { scopeless
    unknown chpl_stringGrowthFactor[172536] "config" "param" 1.5
    (172539 'end of statement')
  }
  function chpl_memhook_md_num[172542]() : _unknown[51] "extern" "local args" "no fn body" "private" "fn synchronization free"
  {
  }
  { scopeless type
    chpl_mem_descInt_t
  }
  function offset_STR_COPY_DATA[172550]() : _unknown[51] "no parens" "private"
  {
    { scopeless
      const CHPL_RT_MD_STR_COPY_DATA[172553] "const" "extern" chpl_mem_descInt_t
      (172556 'end of statement')
    }
    (172564 return(172562 call - CHPL_RT_MD_STR_COPY_DATA(172561 call chpl_memhook_md_num)))
  }
  function offset_STR_COPY_REMOTE[172570]() : _unknown[51] "no parens" "private"
  {
    { scopeless
      const CHPL_RT_MD_STR_COPY_REMOTE[172573] "const" "extern" chpl_mem_descInt_t
      (172576 'end of statement')
    }
    (172584 return(172582 call - CHPL_RT_MD_STR_COPY_REMOTE(172581 call chpl_memhook_md_num)))
  }
  function chpl_string_comm_get[172594](arg dest[172591] :
  bufferType, arg src_loc_id[172600] :
  (172599 call int[13] 64), arg src_addr[172604] :
  bufferType, arg len[172608] :
  integral) : _unknown[51] "inline"
  {
    (172639 'chpl_comm_get' dest src_loc_id src_addr(172638 call(172633 call . len c"safeCast") size_t))
  }
  function getGoodAllocSize[172650](arg requestedSize[172647] :
  int[13]) : _unknown[51] "inline" "private"
  {
    { scopeless
      const allocSize[172660] "const"(172659 call max(172656 call chpl_here_good_alloc_size requestedSize) chpl_stringMinAllocSize)
      (172663 'end of statement')
    }
    (172666 return allocSize)
  }
  function bufferAlloc[172674](arg requestedSize[172672]:_any[178](?)) : _unknown[51] "inline"
  {
    { scopeless
      const allocSize[172680] "const"(172679 call getGoodAllocSize requestedSize)
      (172683 'end of statement')
    }
    { scopeless
      unknown buf[172693](172691 call _cast bufferType(172689 call chpl_here_alloc allocSize offset_STR_COPY_DATA))
      (172696 'end of statement')
    }
    (172702 return(172700 call _build_tuple buf allocSize))
  }
  function bufferAllocExact[172712](arg requestedSize[172709] :
  int[13]) : _unknown[51]
  {
    { scopeless
      unknown buf[172722](172720 call _cast bufferType(172718 call chpl_here_alloc requestedSize offset_STR_COPY_DATA))
      (172725 'end of statement')
    }
    (172728 return buf)
  }
  function bufferRealloc[172738](arg buf[172735] :
  bufferType, arg requestedSize[172741] :
  int[13]) : _unknown[51]
  {
    { scopeless
      const allocSize[172751] "const"(172750 call getGoodAllocSize(172747 call + requestedSize 1))
      (172754 'end of statement')
    }
    { scopeless
      unknown newBuff[172765](172763 call _cast bufferType(172761 call chpl_here_realloc buf allocSize offset_STR_COPY_DATA))
      (172768 'end of statement')
    }
    (172774 return(172772 call _build_tuple newBuff allocSize))
  }
  function bufferEnsureSize[172784](arg buf[172781] :
  bufferType, arg currentSize[172787] :
  int[13], arg requestedSize[172791] :
  int[13]) : _unknown[51]
  {
    if(172812 call _cond_test(172796 call < currentSize requestedSize))
    {
      { scopeless
        (172803 return(172802 call bufferRealloc buf requestedSize))
      }
    }
    {
      { scopeless
        (172810 return(172808 call _build_tuple buf currentSize))
      }
    }
  }
  function bufferCopyRemote[172830](arg src_loc_id[172827] :
  (172826 call int[13] 64), arg src_addr[172833] :
  bufferType, arg len[172837] :
  int[13]) : _unknown[51]
  {
    { scopeless
      const allocSize[172848] "const"(172847 call getGoodAllocSize(172844 call + len 1))
      (172851 'end of statement')
    }
    { scopeless
      const dest[172861] "const"(172859 call _cast bufferType(172857 call chpl_here_alloc allocSize offset_STR_COPY_REMOTE))
      (172864 'end of statement')
    }
    (172871 call chpl_string_comm_get dest src_loc_id src_addr len)
    (172878 call =(172876 call dest len) 0)
    (172882 return dest)
  }
  { scopeless type
    bufferType
  }
  function bufferCopyLocal[172893](arg src_addr[172890] :
  bufferType, arg len[172896] :
  int[13]) : _unknown[51] "inline"
  {
    { scopeless
      const tmp[172911] "const" "temp"(172910 call bufferAlloc(172907 call + len 1))
      (172918 call _check_tuple_var_decl tmp[172911] 2)
      const dst[172899] "const"(172912 call tmp[172911] 0)
      const allocSize[172901] "const"(172915 call tmp[172911] 1)
      (172923 'end of statement')
    }
    (172933 call bufferMemcpyLocal(dst = dst)(src = src_addr)(len = len))
    (172940 call =(172938 call dst len) 0)
    (172948 return(172946 call _build_tuple dst allocSize))
  }
  function bufferFree[172958](arg buf[172955] :
  bufferType) : _unknown[51] "inline"
  {
    (172963 call chpl_here_free buf)
  }
  function bufferCopy[172974](arg buf[172971] :
  bufferType, arg off[172977] :
  int[13], arg len[172981] :
  int[13], arg loc[172985] :
  locIdType) : _unknown[51] "inline"
  {
    if(173029 call _cond_test(172995 call &&(172989 call ! _local)(172993 call != loc chpl_nodeID)))
    {
      { scopeless
        unknown newBuf[173006](173005 call bufferCopyRemote loc(173002 call + buf off) len)
        (173009 'end of statement')
      }
      (173016 return(173014 call _build_tuple newBuf len))
    }
    {
      (173026 return(173025 call bufferCopyLocal(173021 call + buf off) len))
    }
  }
  function bufferMemcpy[173042](arg dst[173039] :
  bufferType, arg src_loc[173048] :
  (173047 call int[13] 64), arg src[173052] :
  bufferType, arg len[173056] :
  int[13], arg dst_off[173061] :
  int[13] =
  0, arg src_off[173067] :
  int[13] =
  0) : _unknown[51] "inline"
  {
    if(173109 call _cond_test(173078 call &&(173072 call ! _local)(173076 call != src_loc chpl_nodeID)))
    {
      (173092 call chpl_string_comm_get(173083 call + dst dst_off) src_loc(173089 call + src src_off) len)
    }
    {
      (173106 call c_memcpy(173098 call + dst dst_off)(173103 call + src src_off) len)
    }
  }
  function bufferMemcpyLocal[173122](arg dst[173119] :
  bufferType, arg src[173125] :
  bufferType, arg len[173129] :
  int[13], arg dst_off[173134] :
  int[13] =
  0, arg src_off[173140] :
  int[13] =
  0) : _unknown[51] "inline"
  {
    (173167 call c_memcpy(173150 call +(173147 call _cast bufferType dst) dst_off)(173158 call +(173155 call _cast bufferType src) src_off)(173165 call _cast(173164 call uint[115] 64) len))
  }
  function bufferMemmoveLocal[173178](arg dst[173175] :
  bufferType, arg src[173180]:_any[178](?), arg len[173183] :
  int[13], arg dst_off[173188] :
  int[13] =
  0, arg src_off[173194] :
  int[13] =
  0) : _unknown[51] "inline"
  {
    (173209 call c_memmove(173201 call + dst dst_off)(173206 call + src src_off) len)
  }
  function bufferGetByte[173220](arg buf[173217] :
  bufferType, arg off[173223] :
  int[13], arg loc[173227] :
  locIdType) : _unknown[51] "inline"
  {
    if(173279 call _cond_test(173237 call &&(173231 call ! _local)(173235 call != loc chpl_nodeID)))
    {
      { scopeless
        const newBuf[173251] "const"(173250 call bufferCopyRemote(src_loc_id = loc)(src_addr =(173245 call + buf off))(len = 1))
        (173254 'end of statement')
      }
      { scopeless
        const ret[173260] "const"(173259 call newBuf 0)
        (173263 'end of statement')
      }
      (173267 call bufferFree newBuf)
      (173270 return ret)
    }
    {
      (173276 return(173275 call buf off))
    }
  }
  function bufferEquals[173292](arg buf1[173289] :
  bufferType, arg off1[173295] :
  int[13], arg loc1[173299] :
  locIdType, arg buf2[173303] :
  bufferType, arg off2[173307] :
  int[13], arg loc2[173311] :
  locIdType, arg len[173315] :
  int[13]) : _unknown[51] "inline"
  {
    (173342 return(173340 call ==(173338 call _strcmp(buf1 =(173321 call + buf1 off1))(len1 = len)(loc1 = loc1)(buf2 =(173331 call + buf2 off2))(len2 = len)(loc2 = loc1)) 0))
  }
  function bufferEqualsLocal[173353](arg buf1[173350] :
  bufferType, arg off1[173356] :
  int[13], arg buf2[173360] :
  bufferType, arg off2[173364] :
  int[13], arg len[173368] :
  int[13]) : _unknown[51] "inline"
  {
    (173391 return(173389 call ==(173387 call _strcmp_local(buf1 =(173374 call + buf1 off1))(len1 = len)(buf2 =(173382 call + buf2 off2))(len2 = len)) 0))
  }
  function _strcmp_local[173402](arg buf1[173399] :
  bufferType, arg len1[173405] :
  int[13], arg buf2[173409] :
  bufferType, arg len2[173413] :
  int[13]) : _unknown[51] "inline" "private"
  {
    { scopeless
      const size[173422] "const"(173421 call min len1 len2)
      (173425 'end of statement')
    }
    { scopeless
      const result[173433] "const"(173432 call c_memcmp buf1 buf2 size)
      (173436 'end of statement')
    }
    if(173468 call _cond_test(173439 call == result 0))
    {
      if(173448 call _cond_test(173443 call < size len1))
      {
        { scopeless
          (173446 return 1)
        }
      }
      if(173463 call _cond_test(173456 call < size len2))
      {
        { scopeless
          (173461 return(173459 call - 1))
        }
      }
    }
    (173473 return result)
  }
  { scopeless type
    int[13]
  }
  function _strcmp[173484](arg buf1[173481] :
  bufferType, arg len1[173487] :
  int[13], arg loc1[173491] :
  locIdType, arg buf2[173495] :
  bufferType, arg len2[173499] :
  int[13], arg loc2[173503] :
  locIdType) : _unknown[51] "inline"
  {
    if(173660 call _cond_test(173514 call &&(173508 call == loc1 chpl_nodeID)(173512 call == loc2 chpl_nodeID)))
    {
      (173523 return(173522 call _strcmp_local buf1 len1 buf2 len2))
    }
    {
      { scopeless
        if(173655 call _cond_test(173534 call &&(173528 call != loc1 chpl_nodeID)(173532 call == loc2 chpl_nodeID)))
        {
          { scopeless
            unknown locBuf1[173542](173541 call bufferCopyRemote loc1 buf1 len1)
            (173545 'end of statement')
          }
          { scopeless
            const ret[173554] "const"(173553 call _strcmp_local locBuf1 len1 buf2 len2)
            (173557 'end of statement')
          }
          (173561 call bufferFree locBuf1)
          (173564 return ret)
        }
        {
          { scopeless
            if(173651 call _cond_test(173574 call &&(173568 call == loc1 chpl_nodeID)(173572 call != loc2 chpl_nodeID)))
            {
              { scopeless
                unknown locBuf2[173582](173581 call bufferCopyRemote loc2 buf2 len2)
                (173585 'end of statement')
              }
              { scopeless
                const ret[173594] "const"(173593 call _strcmp_local buf1 len1 locBuf2 len2)
                (173597 'end of statement')
              }
              (173601 call bufferFree locBuf2)
              (173604 return ret)
            }
            {
              { scopeless
                unknown locBuf1[173612](173611 call bufferCopyRemote loc1 buf1 len1)
                (173615 'end of statement')
              }
              { scopeless
                unknown locBuf2[173623](173622 call bufferCopyRemote loc2 buf2 len2)
                (173626 'end of statement')
              }
              { scopeless
                const ret[173634] "const"(173633 call _strcmp_local locBuf1 len1 locBuf2 len2)
                (173637 'end of statement')
              }
              (173641 call bufferFree locBuf1)
              (173646 call bufferFree locBuf2)
              (173649 return ret)
            }
          }
        }
      }
    }
  }
}