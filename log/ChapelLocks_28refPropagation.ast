AST dump for ChapelLocks after pass refPropagation.
Module use list: Atomics ChapelBase MemConsistency 

{
  type _class_localson_fn[2035137] val _runtime_hdr[2035138]:chpl_comm_on_bundle_t[209301] val _0_tmp[2035140]:chpl_localeID_t[209294] ref _1_this[2035142]:chpl_LocalSpinlock[187386]
  function chpl__init_ChapelLocks[415958]() : void[4] "insert line file info" "module init" "resolved"
  {
    (523921 return _void[55])
  }
  function chpl_LocalSpinlock[187386].init[820232](ref arg this[820235]:chpl_LocalSpinlock[187386], const  ref arg l[820238]:AtomicBool[45874]) : void[4] "compiler generated" "last resort" "method" "primary method" "resolved" "suppress lvalue error"
  {
    val _formal_tmp_l[945066]:AtomicBool[45874] "dead at end of block" "no auto destroy" "no copy" "temp"
    (945069 'move' _formal_tmp_l[945066] l[820238])
    (820254 '.=' this[820235] l[187271] _formal_tmp_l[945066])
    (820258 return _void[55])
  }
  type chpl_LocalSpinlock[187386] val l[187271]:AtomicBool[45874]
  function on_fn[935384](ref arg this[1765454]:chpl_LocalSpinlock[187386]) : void[4] "inlined function" "on" "resolved"
  {
    val tmp[187302]:bool[10] "dead after last mention" "temp"
    const-val tmp[429436]:bool[10] "dead after last mention" "maybe param" "temp"
    ref call_tmp[2146823]:AtomicBool[45874] "dead after last mention" "maybe param" "temp"
    (2146825 'move' call_tmp[2146823](2146827 '.' this[1765454] l[187271]))
    val ret[2223870]:bool[10] "dead after last mention" "RVV" "temp"
    val ret[2223872]:bool[10] "dead at end of block" "insert auto destroy"
    (2223874 'move' ret[2223872] 0)
    const-val tmp[2223877]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
    const-val call_tmp[2223879]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
    (2223881 'move' call_tmp[2223879](2223883 '_wide_get_locale' call_tmp[2146823]))
    (2223885 'move' tmp[2223877] call_tmp[2223879])
    val isdirect[2223888]:bool[10] "temp"
    (2223890 'move' isdirect[2223888](2223893 call chpl_doDirectExecuteOn[187423] call_tmp[2223879]))
    if isdirect[2223888]
    {
      (2223898 call on_fn[1230827] call_tmp[2146823] ret[2223872])
    }
    {
      val _args_foron_fn[2223902]:_class_localson_fn[2040535] "temp"
      (2223904 'move' _args_foron_fn[2223902](2223906 'stack allocate class' _class_localson_fn[2040535]))
      (2223908 '.=' _args_foron_fn[2223902] _0_tmp[2040538] tmp[2223877])
      ref tmp[2223912]:AtomicBool[45874] "temp"
      (2223914 'move' tmp[2223912](2223916 'set reference' call_tmp[2146823]))
      (2223918 '.=' _args_foron_fn[2223902] _1_this[2040540] tmp[2223912])
      ref tmp[2223922]:bool[10] "temp"
      (2223924 'move' tmp[2223922](2223926 'set reference' ret[2223872]))
      (2223928 '.=' _args_foron_fn[2223902] _2_ret[2040542] tmp[2223922])
      val _args_vforon_fn[2223932]:c_void_ptr[149] "temp"
      (2223934 'move' _args_vforon_fn[2223932](2223936 'cast_to_void_star' _args_foron_fn[2223902]))
      val _args_sizeon_fn[2223938]:int(64)[13] "temp"
      (2223940 'move' _args_sizeon_fn[2223938](2223942 'sizeof_bundle' _class_localson_fn[2040535]))
      on(2223945 call wrapon_fn[2040587] tmp[2223877] _args_vforon_fn[2223932] _args_sizeon_fn[2223938] _args_foron_fn[2223902])
    }
    (2223951 'move' ret[2223870] ret[2223872])
    (429447 'move' tmp[429436] ret[2223870])
    val tmp[572003]:bool[10] "dead after last mention" "expr temp" "if-expr result" "insert auto destroy" "temp"
    const-val tmp[572004]:bool[10] "dead after last mention" "maybe param" "temp"
    const-val call_tmp[690426]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
    (690429 'move' call_tmp[690426] tmp[429436])
    (572009 'move' tmp[572004] call_tmp[690426])
    if tmp[572004]
    {
      (572014 'move' tmp[572003] 1)
    }
    {
      const-val tmp[572016]:bool[10] "dead after last mention" "expr temp" "maybe param" "no auto destroy" "temp"
      ref call_tmp[2146833]:AtomicBool[45874] "dead after last mention" "maybe param" "temp"
      (2146835 'move' call_tmp[2146833](2146837 '.' this[1765454] l[187271]))
      const-val call_tmp[690440]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
      val inlineImm[2224207]:bool[10] "temp"
      (2224209 'move' inlineImm[2224207] 1)
      val ret[2224212]:bool[10] "dead after last mention" "RVV" "temp"
      val ret[2224214]:bool[10] "dead at end of block" "insert auto destroy"
      (2224216 'move' ret[2224214] 0)
      const-val tmp[2224219]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
      const-val call_tmp[2224221]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
      (2224223 'move' call_tmp[2224221](2224225 '_wide_get_locale' call_tmp[2146833]))
      (2224227 'move' tmp[2224219] call_tmp[2224221])
      val isdirect[2224230]:bool[10] "temp"
      (2224232 'move' isdirect[2224230](2224235 call chpl_doDirectExecuteOn[187423] call_tmp[2224221]))
      if isdirect[2224230]
      {
        (2224240 call on_fn[1231661] call_tmp[2146833] inlineImm[2224207] ret[2224214])
      }
      {
        val _args_foron_fn[2224245]:_class_localson_fn[2040648] "temp"
        (2224247 'move' _args_foron_fn[2224245](2224249 'stack allocate class' _class_localson_fn[2040648]))
        (2224251 '.=' _args_foron_fn[2224245] _0_tmp[2040651] tmp[2224219])
        ref tmp[2224255]:AtomicBool[45874] "temp"
        (2224257 'move' tmp[2224255](2224259 'set reference' call_tmp[2146833]))
        (2224261 '.=' _args_foron_fn[2224245] _1_this[2040653] tmp[2224255])
        (2224265 '.=' _args_foron_fn[2224245] _2_value[2040655] inlineImm[2224207])
        ref tmp[2224269]:bool[10] "temp"
        (2224271 'move' tmp[2224269](2224273 'set reference' ret[2224214]))
        (2224275 '.=' _args_foron_fn[2224245] _3_ret[2040657] tmp[2224269])
        val _args_vforon_fn[2224279]:c_void_ptr[149] "temp"
        (2224281 'move' _args_vforon_fn[2224279](2224283 'cast_to_void_star' _args_foron_fn[2224245]))
        val _args_sizeon_fn[2224285]:int(64)[13] "temp"
        (2224287 'move' _args_sizeon_fn[2224285](2224289 'sizeof_bundle' _class_localson_fn[2040648]))
        on(2224292 call wrapon_fn[2040706] tmp[2224219] _args_vforon_fn[2224279] _args_sizeon_fn[2224285] _args_foron_fn[2224245])
      }
      (2224298 'move' ret[2224212] ret[2224214])
      (690443 'move' call_tmp[690440] ret[2224212])
      (572018 'move' tmp[572016] call_tmp[690440])
      (572023 'move' tmp[572003] tmp[572016])
    }
    (187350 'move' tmp[187302] tmp[572003])
    WhileDo[187307] hazard
    {
      (187300 call chpl_task_yield[209642])
      const-val tmp[429415]:bool[10] "dead after last mention" "maybe param" "temp"
      ref call_tmp[2146843]:AtomicBool[45874] "dead after last mention" "maybe param" "temp"
      (2146845 'move' call_tmp[2146843](2146847 '.' this[1765454] l[187271]))
      val ret[2223959]:bool[10] "dead after last mention" "RVV" "temp"
      val ret[2223961]:bool[10] "dead at end of block" "insert auto destroy"
      (2223963 'move' ret[2223961] 0)
      const-val tmp[2223966]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
      const-val call_tmp[2223968]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
      (2223970 'move' call_tmp[2223968](2223972 '_wide_get_locale' call_tmp[2146843]))
      (2223974 'move' tmp[2223966] call_tmp[2223968])
      val isdirect[2223977]:bool[10] "temp"
      (2223979 'move' isdirect[2223977](2223982 call chpl_doDirectExecuteOn[187423] call_tmp[2223968]))
      if isdirect[2223977]
      {
        (2223987 call on_fn[1230827] call_tmp[2146843] ret[2223961])
      }
      {
        val _args_foron_fn[2223991]:_class_localson_fn[2040535] "temp"
        (2223993 'move' _args_foron_fn[2223991](2223995 'stack allocate class' _class_localson_fn[2040535]))
        (2223997 '.=' _args_foron_fn[2223991] _0_tmp[2040538] tmp[2223966])
        ref tmp[2224001]:AtomicBool[45874] "temp"
        (2224003 'move' tmp[2224001](2224005 'set reference' call_tmp[2146843]))
        (2224007 '.=' _args_foron_fn[2223991] _1_this[2040540] tmp[2224001])
        ref tmp[2224011]:bool[10] "temp"
        (2224013 'move' tmp[2224011](2224015 'set reference' ret[2223961]))
        (2224017 '.=' _args_foron_fn[2223991] _2_ret[2040542] tmp[2224011])
        val _args_vforon_fn[2224021]:c_void_ptr[149] "temp"
        (2224023 'move' _args_vforon_fn[2224021](2224025 'cast_to_void_star' _args_foron_fn[2223991]))
        val _args_sizeon_fn[2224027]:int(64)[13] "temp"
        (2224029 'move' _args_sizeon_fn[2224027](2224031 'sizeof_bundle' _class_localson_fn[2040535]))
        on(2224034 call wrapon_fn[2040587] tmp[2223966] _args_vforon_fn[2224021] _args_sizeon_fn[2224027] _args_foron_fn[2223991])
      }
      (2224040 'move' ret[2223959] ret[2223961])
      (429426 'move' tmp[429415] ret[2223959])
      val tmp[572030]:bool[10] "dead after last mention" "expr temp" "if-expr result" "insert auto destroy" "temp"
      const-val tmp[572031]:bool[10] "dead after last mention" "maybe param" "temp"
      const-val call_tmp[690459]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
      (690462 'move' call_tmp[690459] tmp[429415])
      (572036 'move' tmp[572031] call_tmp[690459])
      if tmp[572031]
      {
        (572041 'move' tmp[572030] 1)
      }
      {
        const-val tmp[572043]:bool[10] "dead after last mention" "expr temp" "maybe param" "no auto destroy" "temp"
        ref call_tmp[2146853]:AtomicBool[45874] "dead after last mention" "maybe param" "temp"
        (2146855 'move' call_tmp[2146853](2146857 '.' this[1765454] l[187271]))
        const-val call_tmp[690473]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
        val inlineImm[2224304]:bool[10] "temp"
        (2224306 'move' inlineImm[2224304] 1)
        val ret[2224309]:bool[10] "dead after last mention" "RVV" "temp"
        val ret[2224311]:bool[10] "dead at end of block" "insert auto destroy"
        (2224313 'move' ret[2224311] 0)
        const-val tmp[2224316]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
        const-val call_tmp[2224318]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
        (2224320 'move' call_tmp[2224318](2224322 '_wide_get_locale' call_tmp[2146853]))
        (2224324 'move' tmp[2224316] call_tmp[2224318])
        val isdirect[2224327]:bool[10] "temp"
        (2224329 'move' isdirect[2224327](2224332 call chpl_doDirectExecuteOn[187423] call_tmp[2224318]))
        if isdirect[2224327]
        {
          (2224337 call on_fn[1231661] call_tmp[2146853] inlineImm[2224304] ret[2224311])
        }
        {
          val _args_foron_fn[2224342]:_class_localson_fn[2040648] "temp"
          (2224344 'move' _args_foron_fn[2224342](2224346 'stack allocate class' _class_localson_fn[2040648]))
          (2224348 '.=' _args_foron_fn[2224342] _0_tmp[2040651] tmp[2224316])
          ref tmp[2224352]:AtomicBool[45874] "temp"
          (2224354 'move' tmp[2224352](2224356 'set reference' call_tmp[2146853]))
          (2224358 '.=' _args_foron_fn[2224342] _1_this[2040653] tmp[2224352])
          (2224362 '.=' _args_foron_fn[2224342] _2_value[2040655] inlineImm[2224304])
          ref tmp[2224366]:bool[10] "temp"
          (2224368 'move' tmp[2224366](2224370 'set reference' ret[2224311]))
          (2224372 '.=' _args_foron_fn[2224342] _3_ret[2040657] tmp[2224366])
          val _args_vforon_fn[2224376]:c_void_ptr[149] "temp"
          (2224378 'move' _args_vforon_fn[2224376](2224380 'cast_to_void_star' _args_foron_fn[2224342]))
          val _args_sizeon_fn[2224382]:int(64)[13] "temp"
          (2224384 'move' _args_sizeon_fn[2224382](2224386 'sizeof_bundle' _class_localson_fn[2040648]))
          on(2224389 call wrapon_fn[2040706] tmp[2224316] _args_vforon_fn[2224376] _args_sizeon_fn[2224382] _args_foron_fn[2224342])
        }
        (2224395 'move' ret[2224309] ret[2224311])
        (690476 'move' call_tmp[690473] ret[2224309])
        (572045 'move' tmp[572043] call_tmp[690473])
        (572050 'move' tmp[572030] tmp[572043])
      }
      (187328 'move' tmp[187302] tmp[572030])
      tmp[187302]
    }
    (935391 return _void[55])
  }
  function wrapon_fn[2035177](const in arg dummy_locale_arg[2035179]:chpl_localeID_t[209294], in arg buf[2035181]:c_void_ptr[149], in arg buf_size[2035183]:int(64)[13], in arg c[2035185]:_class_localson_fn[2035137]) : void[4] "inlined function" "on block"
  {
    ref _1_this[2035197]:chpl_LocalSpinlock[187386] "temp"
    (2035202 'move' _1_this[2035197](2035199 '.v' c[2035185] _1_this[2035142]))
    (2035188 call on_fn[935384] _1_this[2035197])
    (2035205 return _void[55])
  }
}