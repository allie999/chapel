AST dump for ChapelLocks after pass refPropagation.
Module use list: Atomics ChapelBase MemConsistency 

{
  type _class_localson_fn[2086620] val _runtime_hdr[2086621]:chpl_comm_on_bundle_t[209301] val _0_tmp[2086623]:chpl_localeID_t[209294] ref _1_this[2086625]:chpl_LocalSpinlock[187386]
  function chpl__init_ChapelLocks[416047]() : void[4] "insert line file info" "module init" "resolved"
  {
    (524012 return _void[55])
  }
  function chpl_LocalSpinlock[187386].init[820321](ref arg this[820324]:chpl_LocalSpinlock[187386], const  ref arg l[820327]:AtomicBool[45874]) : void[4] "compiler generated" "last resort" "method" "primary method" "resolved" "suppress lvalue error"
  {
    val _formal_tmp_l[945155]:AtomicBool[45874] "dead at end of block" "no auto destroy" "no copy" "temp"
    (945158 'move' _formal_tmp_l[945155] l[820327])
    (820343 '.=' this[820324] l[187271] _formal_tmp_l[945155])
    (820347 return _void[55])
  }
  type chpl_LocalSpinlock[187386] val l[187271]:AtomicBool[45874]
  function on_fn[935473](ref arg this[1806908]:chpl_LocalSpinlock[187386]) : void[4] "inlined function" "on" "resolved"
  {
    val tmp[187302]:bool[10] "dead after last mention" "temp"
    const-val tmp[429525]:bool[10] "dead after last mention" "maybe param" "temp"
    ref call_tmp[2200287]:AtomicBool[45874] "dead after last mention" "maybe param" "temp"
    (2200289 'move' call_tmp[2200287](2200291 '.' this[1806908] l[187271]))
    val ret[2280342]:bool[10] "dead after last mention" "RVV" "temp"
    val ret[2280344]:bool[10] "dead at end of block" "insert auto destroy"
    (2280346 'move' ret[2280344] 0)
    const-val tmp[2280349]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
    const-val call_tmp[2280351]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
    (2280353 'move' call_tmp[2280351](2280355 '_wide_get_locale' call_tmp[2200287]))
    (2280357 'move' tmp[2280349] call_tmp[2280351])
    val isdirect[2280360]:bool[10] "temp"
    (2280362 'move' isdirect[2280360](2280365 call chpl_doDirectExecuteOn[187423] call_tmp[2280351]))
    if isdirect[2280360]
    {
      (2280370 call on_fn[1230916] call_tmp[2200287] ret[2280344])
    }
    {
      val _args_foron_fn[2280374]:_class_localson_fn[2092033] "temp"
      (2280376 'move' _args_foron_fn[2280374](2280378 'stack allocate class' _class_localson_fn[2092033]))
      (2280380 '.=' _args_foron_fn[2280374] _0_tmp[2092036] tmp[2280349])
      ref tmp[2280384]:AtomicBool[45874] "temp"
      (2280386 'move' tmp[2280384](2280388 'set reference' call_tmp[2200287]))
      (2280390 '.=' _args_foron_fn[2280374] _1_this[2092038] tmp[2280384])
      ref tmp[2280394]:bool[10] "temp"
      (2280396 'move' tmp[2280394](2280398 'set reference' ret[2280344]))
      (2280400 '.=' _args_foron_fn[2280374] _2_ret[2092040] tmp[2280394])
      val _args_vforon_fn[2280404]:c_void_ptr[149] "temp"
      (2280406 'move' _args_vforon_fn[2280404](2280408 'cast_to_void_star' _args_foron_fn[2280374]))
      val _args_sizeon_fn[2280410]:int(64)[13] "temp"
      (2280412 'move' _args_sizeon_fn[2280410](2280414 'sizeof_bundle' _class_localson_fn[2092033]))
      on(2280417 call wrapon_fn[2092085] tmp[2280349] _args_vforon_fn[2280404] _args_sizeon_fn[2280410] _args_foron_fn[2280374])
    }
    (2280423 'move' ret[2280342] ret[2280344])
    (429536 'move' tmp[429525] ret[2280342])
    val tmp[572077]:bool[10] "dead after last mention" "expr temp" "if-expr result" "insert auto destroy" "temp"
    const-val tmp[572078]:bool[10] "dead after last mention" "maybe param" "temp"
    const-val call_tmp[690500]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
    (690503 'move' call_tmp[690500] tmp[429525])
    (572083 'move' tmp[572078] call_tmp[690500])
    if tmp[572078]
    {
      (572088 'move' tmp[572077] 1)
    }
    {
      const-val tmp[572090]:bool[10] "dead after last mention" "expr temp" "maybe param" "no auto destroy" "temp"
      ref call_tmp[2200297]:AtomicBool[45874] "dead after last mention" "maybe param" "temp"
      (2200299 'move' call_tmp[2200297](2200301 '.' this[1806908] l[187271]))
      const-val call_tmp[690514]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
      val inlineImm[2280679]:bool[10] "temp"
      (2280681 'move' inlineImm[2280679] 1)
      val ret[2280684]:bool[10] "dead after last mention" "RVV" "temp"
      val ret[2280686]:bool[10] "dead at end of block" "insert auto destroy"
      (2280688 'move' ret[2280686] 0)
      const-val tmp[2280691]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
      const-val call_tmp[2280693]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
      (2280695 'move' call_tmp[2280693](2280697 '_wide_get_locale' call_tmp[2200297]))
      (2280699 'move' tmp[2280691] call_tmp[2280693])
      val isdirect[2280702]:bool[10] "temp"
      (2280704 'move' isdirect[2280702](2280707 call chpl_doDirectExecuteOn[187423] call_tmp[2280693]))
      if isdirect[2280702]
      {
        (2280712 call on_fn[1231750] call_tmp[2200297] inlineImm[2280679] ret[2280686])
      }
      {
        val _args_foron_fn[2280717]:_class_localson_fn[2092146] "temp"
        (2280719 'move' _args_foron_fn[2280717](2280721 'stack allocate class' _class_localson_fn[2092146]))
        (2280723 '.=' _args_foron_fn[2280717] _0_tmp[2092149] tmp[2280691])
        ref tmp[2280727]:AtomicBool[45874] "temp"
        (2280729 'move' tmp[2280727](2280731 'set reference' call_tmp[2200297]))
        (2280733 '.=' _args_foron_fn[2280717] _1_this[2092151] tmp[2280727])
        (2280737 '.=' _args_foron_fn[2280717] _2_value[2092153] inlineImm[2280679])
        ref tmp[2280741]:bool[10] "temp"
        (2280743 'move' tmp[2280741](2280745 'set reference' ret[2280686]))
        (2280747 '.=' _args_foron_fn[2280717] _3_ret[2092155] tmp[2280741])
        val _args_vforon_fn[2280751]:c_void_ptr[149] "temp"
        (2280753 'move' _args_vforon_fn[2280751](2280755 'cast_to_void_star' _args_foron_fn[2280717]))
        val _args_sizeon_fn[2280757]:int(64)[13] "temp"
        (2280759 'move' _args_sizeon_fn[2280757](2280761 'sizeof_bundle' _class_localson_fn[2092146]))
        on(2280764 call wrapon_fn[2092204] tmp[2280691] _args_vforon_fn[2280751] _args_sizeon_fn[2280757] _args_foron_fn[2280717])
      }
      (2280770 'move' ret[2280684] ret[2280686])
      (690517 'move' call_tmp[690514] ret[2280684])
      (572092 'move' tmp[572090] call_tmp[690514])
      (572097 'move' tmp[572077] tmp[572090])
    }
    (187350 'move' tmp[187302] tmp[572077])
    WhileDo[187307] hazard
    {
      (187300 call chpl_task_yield[209642])
      const-val tmp[429504]:bool[10] "dead after last mention" "maybe param" "temp"
      ref call_tmp[2200307]:AtomicBool[45874] "dead after last mention" "maybe param" "temp"
      (2200309 'move' call_tmp[2200307](2200311 '.' this[1806908] l[187271]))
      val ret[2280431]:bool[10] "dead after last mention" "RVV" "temp"
      val ret[2280433]:bool[10] "dead at end of block" "insert auto destroy"
      (2280435 'move' ret[2280433] 0)
      const-val tmp[2280438]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
      const-val call_tmp[2280440]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
      (2280442 'move' call_tmp[2280440](2280444 '_wide_get_locale' call_tmp[2200307]))
      (2280446 'move' tmp[2280438] call_tmp[2280440])
      val isdirect[2280449]:bool[10] "temp"
      (2280451 'move' isdirect[2280449](2280454 call chpl_doDirectExecuteOn[187423] call_tmp[2280440]))
      if isdirect[2280449]
      {
        (2280459 call on_fn[1230916] call_tmp[2200307] ret[2280433])
      }
      {
        val _args_foron_fn[2280463]:_class_localson_fn[2092033] "temp"
        (2280465 'move' _args_foron_fn[2280463](2280467 'stack allocate class' _class_localson_fn[2092033]))
        (2280469 '.=' _args_foron_fn[2280463] _0_tmp[2092036] tmp[2280438])
        ref tmp[2280473]:AtomicBool[45874] "temp"
        (2280475 'move' tmp[2280473](2280477 'set reference' call_tmp[2200307]))
        (2280479 '.=' _args_foron_fn[2280463] _1_this[2092038] tmp[2280473])
        ref tmp[2280483]:bool[10] "temp"
        (2280485 'move' tmp[2280483](2280487 'set reference' ret[2280433]))
        (2280489 '.=' _args_foron_fn[2280463] _2_ret[2092040] tmp[2280483])
        val _args_vforon_fn[2280493]:c_void_ptr[149] "temp"
        (2280495 'move' _args_vforon_fn[2280493](2280497 'cast_to_void_star' _args_foron_fn[2280463]))
        val _args_sizeon_fn[2280499]:int(64)[13] "temp"
        (2280501 'move' _args_sizeon_fn[2280499](2280503 'sizeof_bundle' _class_localson_fn[2092033]))
        on(2280506 call wrapon_fn[2092085] tmp[2280438] _args_vforon_fn[2280493] _args_sizeon_fn[2280499] _args_foron_fn[2280463])
      }
      (2280512 'move' ret[2280431] ret[2280433])
      (429515 'move' tmp[429504] ret[2280431])
      val tmp[572104]:bool[10] "dead after last mention" "expr temp" "if-expr result" "insert auto destroy" "temp"
      const-val tmp[572105]:bool[10] "dead after last mention" "maybe param" "temp"
      const-val call_tmp[690533]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
      (690536 'move' call_tmp[690533] tmp[429504])
      (572110 'move' tmp[572105] call_tmp[690533])
      if tmp[572105]
      {
        (572115 'move' tmp[572104] 1)
      }
      {
        const-val tmp[572117]:bool[10] "dead after last mention" "expr temp" "maybe param" "no auto destroy" "temp"
        ref call_tmp[2200317]:AtomicBool[45874] "dead after last mention" "maybe param" "temp"
        (2200319 'move' call_tmp[2200317](2200321 '.' this[1806908] l[187271]))
        const-val call_tmp[690547]:bool[10] "dead after last mention" "expr temp" "maybe param" "temp"
        val inlineImm[2280776]:bool[10] "temp"
        (2280778 'move' inlineImm[2280776] 1)
        val ret[2280781]:bool[10] "dead after last mention" "RVV" "temp"
        val ret[2280783]:bool[10] "dead at end of block" "insert auto destroy"
        (2280785 'move' ret[2280783] 0)
        const-val tmp[2280788]:chpl_localeID_t[209294] "dead after last mention" "const" "temp"
        const-val call_tmp[2280790]:chpl_localeID_t[209294] "dead after last mention" "expr temp" "maybe param" "temp"
        (2280792 'move' call_tmp[2280790](2280794 '_wide_get_locale' call_tmp[2200317]))
        (2280796 'move' tmp[2280788] call_tmp[2280790])
        val isdirect[2280799]:bool[10] "temp"
        (2280801 'move' isdirect[2280799](2280804 call chpl_doDirectExecuteOn[187423] call_tmp[2280790]))
        if isdirect[2280799]
        {
          (2280809 call on_fn[1231750] call_tmp[2200317] inlineImm[2280776] ret[2280783])
        }
        {
          val _args_foron_fn[2280814]:_class_localson_fn[2092146] "temp"
          (2280816 'move' _args_foron_fn[2280814](2280818 'stack allocate class' _class_localson_fn[2092146]))
          (2280820 '.=' _args_foron_fn[2280814] _0_tmp[2092149] tmp[2280788])
          ref tmp[2280824]:AtomicBool[45874] "temp"
          (2280826 'move' tmp[2280824](2280828 'set reference' call_tmp[2200317]))
          (2280830 '.=' _args_foron_fn[2280814] _1_this[2092151] tmp[2280824])
          (2280834 '.=' _args_foron_fn[2280814] _2_value[2092153] inlineImm[2280776])
          ref tmp[2280838]:bool[10] "temp"
          (2280840 'move' tmp[2280838](2280842 'set reference' ret[2280783]))
          (2280844 '.=' _args_foron_fn[2280814] _3_ret[2092155] tmp[2280838])
          val _args_vforon_fn[2280848]:c_void_ptr[149] "temp"
          (2280850 'move' _args_vforon_fn[2280848](2280852 'cast_to_void_star' _args_foron_fn[2280814]))
          val _args_sizeon_fn[2280854]:int(64)[13] "temp"
          (2280856 'move' _args_sizeon_fn[2280854](2280858 'sizeof_bundle' _class_localson_fn[2092146]))
          on(2280861 call wrapon_fn[2092204] tmp[2280788] _args_vforon_fn[2280848] _args_sizeon_fn[2280854] _args_foron_fn[2280814])
        }
        (2280867 'move' ret[2280781] ret[2280783])
        (690550 'move' call_tmp[690547] ret[2280781])
        (572119 'move' tmp[572117] call_tmp[690547])
        (572124 'move' tmp[572104] tmp[572117])
      }
      (187328 'move' tmp[187302] tmp[572104])
      tmp[187302]
    }
    (935480 return _void[55])
  }
  function wrapon_fn[2086660](const in arg dummy_locale_arg[2086662]:chpl_localeID_t[209294], in arg buf[2086664]:c_void_ptr[149], in arg buf_size[2086666]:int(64)[13], in arg c[2086668]:_class_localson_fn[2086620]) : void[4] "inlined function" "on block"
  {
    ref _1_this[2086680]:chpl_LocalSpinlock[187386] "temp"
    (2086685 'move' _1_this[2086680](2086682 '.v' c[2086668] _1_this[2086625]))
    (2086671 call on_fn[935473] _1_this[2086680])
    (2086688 return _void[55])
  }
}